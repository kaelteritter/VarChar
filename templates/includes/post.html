{% load static %}
<div class="post-feed">

  <!-- ПОСТ -->
  {% for post in posts %}
  <div class="post">

    
    <div class="post-header-container">
      <img class="post-author-avatar" src="{% static "img/A.png" %}">
      <div class="post-header">
        <div class="post-author">
          <p class="post-author-username">{{ post.author }}</p>
          <p class="post-author-rank">Модератор</p>
        </div>
        <div class="post-date">
          <p class="post-date-published">{{ post.created_at }}</p>
        </div>
      </div>
      {% if post.author == request.user %}
      <button class="button edit-post">
        <img src="{% static "svg/highlighter.svg" %}" alt="">
      </button>
      <button class="button delete-post">
        <img src="{% static "svg/x-square.svg" %}" alt="">
      </button>
      {% endif %}
    </div>

    <div class="post-body">
      <p class="post-text">
        {{ post.text }}
      </p>
      <span class="post-updated-at">{{ post.updated_at }}</span>
    </div>

    <div class="post-footer">
      <ul class="post-stats">
        <li class="post-stats-item">
          <button onclick="likePost({{ post.id }})" id="like-{{ post.id }}" class="like button">
            <img class="post-stats-item-icon" src="{% static "svg/heart.svg" %}" alt="">  
          </button>
          <p class="post-likes">15</p>
        </li>
        <li class="post-stats-item">
          <button onclick="toggleComments({{ post.id }})" id="comments" class="comment button">
            <img class="post-stats-item-icon" src="{% static "svg/chat.svg" %}" alt="">  
          </button>
          <p class="post-comments">{{ post.comments.count }}</p>
        </li>
        <li class="post-stats-item">
          <button id="reposts" class="repost button">
            <img class="post-stats-item-icon" src="{% static "svg/check-circle.svg" %}" alt="">  
          </button>
          <p class="post-reposts">6</p>
        </li>
      </ul>
    </div>

    <!-- Блок комментариев -->
    <section class="comments-block" id="comment-section-to-{{ post.id }}">

      <!-- Форма добавления комментария -->
      <form class="add-comment-form" id="add-comment-form" action="">
        <input type="text" name="text" id="add-comment" placeholder="Напишите комментарий...">
        <button class="add-comment" type="submit">
          <img src="{% static "svg/send.svg" %}" alt="">
        </button> 
      </form>

      <!-- Комментарии -->
      
      <div class="post-comments-section" id="comments-section">

        <h4 class="comment-section-title">Комментарии</h4>
        <ul class="comment-list">

          {% for comment in post.comments.all %}
          <li class="comment-item">

            <div class="comment-header-container">
              <img class="comment-author-avatar" src="{% static "img/A.png" %}">
              <div class="comment-header">
                <div class="comment-author">
                  <p class="comment-author-username">{{ comment.author }}</p>
                  <p class="comment-author-rank">Модератор</p>
                </div>
                <div class="comment-date">
                  <p class="comment-date-published">{{ comment.updated_at }}</p>
                </div>
              </div>
            </div>

            <div class="comment-body">
              <p class="comment-text">
                {{ comment.text }}
              </p>
            </div>

            <ul class="comment-reaction-list">
              <li class="comment-reaction-item">
                <button onclick="likeComment()" id="like-comment" class="like-comment button">
                  <img class="post-stats-item-icon" src="{% static "svg/heart.svg" %}" alt="">  
                </button>
                <p class="post-likes">4</p>
              </li>
              <li class="comment-reaction-item">
                <button class="add-comment button" type="submit">
                  <img class="comment-reply-icon" src="{% static "svg/reply.svg" %}" alt="">
                </button>
              </li>

            </ul> <!-- конец-comment-reaction-list-->
          </li> <!-- конец-comment-item-->
          {% endfor %}

        </ul><!-- конец-comment-item-list-->
      </div>
    </section>
    
    <!-- комментарии (конец) -->

  </div>
{% endfor %}